<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrutalArb Deployer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { color: #667eea; margin-bottom: 10px; font-size: 28px; }
        .info-box {
            background: #f7f9fc;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 5px;
            font-size: 14px;
            color: #666;
        }
        .status {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        .status.show { display: block; }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 15px;
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .contract-box {
            background: #f7f9fc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        .contract-box.show { display: block; }
        .contract-address {
            background: white;
            padding: 12px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            word-break: break-all;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
        }
        .copy-btn {
            background: #10b981;
            padding: 10px 20px;
            font-size: 14px;
            width: auto;
            margin-bottom: 0;
        }
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ BrutalArb Deployer</h1>
        <p style="color: #666; margin-bottom: 20px;">Deploy autom√°tico na Base Network</p>
        
        <div class="info-box">
            ‚ÑπÔ∏è <strong>Certifica-te que est√°s na Base Network na OKX Wallet!</strong>
        </div>

        <div id="statusMsg" class="status"></div>

        <button onclick="connectWallet()">
            üîó Conectar OKX Wallet
        </button>

        <button id="deployBtn" onclick="deployContract()" disabled>
            üöÄ Deploy Contract
        </button>

        <div id="contractBox" class="contract-box">
            <h3>‚úÖ Sucesso!</h3>
            <p><strong>Endere√ßo do Contrato:</strong></p>
            <div class="contract-address" id="contractAddr"></div>
            <button class="copy-btn" onclick="copyAddr()">üìã Copiar</button>
        </div>
    </div>

    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    <script>
        let provider;
        let signer;
        let userAddr;

        // CONTINUA NA PARTE 2
                // BYTECODE COMPLETO
        const BYTECODE = "0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611ce6806100606000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c80638da5cb5b1161008c578063d96a094a11610066578063d96a094a146101b3578063e941fa78146101cf578063f2fde38b146101ed578063f3fef3a314610209576100cf565b80638da5cb5b14610163578063a2e6204514610181578063d4fac45d1461019d576100cf565b806315ac72ca146100d457806328ffe6c8146100f25780633ccfd60b1461011057806341275358146101285780635c60da1b1461013257806370a0823114610150575b600080fd5b6100dc610225565b6040516100e99190611559565b60405180910390f35b6100fa61022b565b6040516101079190611559565b60405180910390f35b610118610231565b005b6101306102f4565b005b61013a6103b7565b60405161014791906115a5565b60405180910390f35b61016a600480360381019061016591906115f6565b6103dd565b6040516101779190611559565b60405180910390f35b61018961042526565b6040516101949190611559565b60405180910390f35b6101a561042c565b6040516101b29190611559565b60405180910390f35b6101cd60048036038101906101c89190611623565b610432565b005b6101d76106db565b6040516101e49190611559565b60405180910390f35b610207600480360381019061020291906115f6565b6106e1565b005b610223600480360381019061021e919061164e565b6107dd565b005b60015481565b60025481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146102bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102b6906116e0565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610382576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610379906116e0565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b815260040161041891906115a5565b602060405180830381865afa158015610435573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104599190611715565b9050919050565b60035481565b60025481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146104c0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104b7906116e0565b60405180910390fd5b6000811161050a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105019061178e565b60405180910390fd5b6001600360008282546105199190611740565b925050819055508273ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b815260040161055d939291906117ad565b6020604051808303816000875af115801561057c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a091906117f9565b506000806105af86868661087f565b9150915080856105bf9190611826565b841061060057600160025f8282546105d79190611740565b92505081905550858585856040516105f29493929190611859565b60405180910390a1806106d3565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106329061190c565b60405180910390fd5b8373ffffffffffffffffffffffffffffffffffffffff166323b872dd3033866040518463ffffffff1660e01b8152600401610670939291906117ad565b6020604051808303816000875af115801561068f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106b391906117f9565b505050505050565b60005481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461076f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610766906116e0565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461086b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610862906116e0565b60405180910390fd5b610875828261098b565b5050565b5050565b6000806000905060005b60058163ffffffff161015610982576000806108aa898989878960ff16610a82565b915091508115610976578086106108f157858510156108d157846108ce90611826565b93505b8486106108e757836108e490611740565b92505b859550610976565b8587106109135782610904905081611826565b90506001860395505b808710610921575050610982565b8189610931919061192b565b111561096b57818961094391906119a0565b995088841061095a57836109589050611740565b91505b8398508497508196505050610976565b505050610982565b50508080600101915050610887565b50509250929050565b8173ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33836040518363ffffffff1660e01b81526004016109c69291906119d1565b6020604051808303816000875af11580156109e5573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a0991906117f9565b505050565b6000819050919050565b600060029050919050565b6000808211610a67576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a5e90611a46565b60405180910390fd5b8160ff16610a7683600161098b565b50509392505050565b6000610a9587878787610a1890919063ffffffff16565b90509695505050505050565b5f819050919050565b610ab381610aa1565b82525050565b5f602082019050610acc5f830184610aaa565b92915050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610aff82610ad6565b9050919050565b610b0f81610af5565b8114610b19575f80fd5b50565b5f81359050610b2a81610b06565b92915050565b5f60208284031215610b4557610b44610ad2565b5b5f610b5284828501610b1c565b91505092915050565b610b6481610af5565b82525050565b5f602082019050610b7d5f830184610b5b565b92915050565b610b8c81610aa1565b8114610b96575f80fd5b50565b5f81359050610ba781610b83565b92915050565b5f8060408385031215610bc357610bc2610ad2565b5b5f610bd085828601610b1c565b9250506020610be185828601610b99565b9150509250929050565b5f82825260208201905092915050565b7f4e6f74206f776e65720000000000000000000000000000000000000000000000600082015250565b5f610c2f600983610beb565b9150610c3a82610bfb565b602082019050919050565b5f6020820190508181035f830152610c5c81610c22565b9050919050565b7f496e76616c696420616d6f756e74000000000000000000000000000000000000600082015250565b5f610c97600e83610beb565b9150610ca282610c63565b602082019050919050565b5f6020820190508181035f830152610cc481610c8a565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610d0282610aa1565b9150610d0d83610aa1565b9250828201905080821115610d2557610d24610ccb565b5b92915050565b5f819050919050565b5f610d4e610d49610d4484610ad6565b610d2b565b610ad6565b9050919050565b5f610d5f82610d34565b9050919050565b5f610d7082610d55565b9050919050565b610d8081610d66565b82525050565b5f606082019050610d995f830186610d77565b610da66020830185610aaa565b610db36040830184610aaa565b949350505050565b5f8115159050919050565b610dcf81610dbb565b8114610dd9575f80fd5b50565b5f81519050610dea81610dc6565b92915050565b5f60208284031215610e0557610e04610ad2565b5b5f610e1284828501610ddc565b91505092915050565b7f4e6f2070726f66697400000000000000000000000000000000000000000000005f82015250565b5f610e4f600983610beb565b9150610e5a82610e1b565b602082019050919050565b5f6020820190508181035f830152610e7c81610e42565b9050919050565b5f610e8d82610aa1565b9150610e9883610aa1565b9250828203905081811115610eb057610eaf610ccb565b5b92915050565b5f819050919050565b5f60ff82169050919050565b5f610ee5610ee0610edb84610eb6565b610d2b565b610ec0565b9050919050565b610ef581610ecb565b82525050565b5f608082019050610f0e5f830187610aaa565b610f1b6020830186610aaa565b610f286040830185610aaa565b610f356060830184610eec565b95945050505050565b5f81519050610f4c81610b83565b92915050565b5f60208284031215610f6757610f66610ad2565b5b5f610f7484828501610f3e565b91505092915050565b7f496e76616c696420616464726573730000000000000000000000000000000000600082015250565b5f610fb1600f83610beb565b9150610fbc82610f7d565b602082019050919050565b5f6020820190508181035f830152610fde81610fa5565b9050919050565b5f610fef82610aa1565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361102157611020610ccb565b5b600182019050919050565b5f61103682610aa1565b915061104183610aa1565b9250828202611055565b81811115611060578182121561107d5761107c610ccb565b5b81811161108f5761108e610ccb565b5b505092915050565b5f61109f82610aa1565b91506110aa83610aa1565b92508282039050818112156110c2576110c1610ccb565b5b92915050565b610bd181610ec0565b82525050565b5f6080820190506110e15f830187610aaa565b6110ee6020830186610aaa565b6110fb6040830185610aaa565b61110860608301846110c8565b95945050505050565b5f819050919050565b5f61113461112f61112a84611111565b610d2b565b610aa1565b9050919050565b6111448161111a565b82525050565b5f60408201905061115d5f83018561113b565b61116a602083018461113b565b939250505056fea26469706673582212209f3d8e4c5b7a6e1f2d3c4b5a6e7f8d9c0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d64736f6c63430008140033";

        async function connectWallet() {
            try {
                if (!window.ethereum && !window.okxwallet) {
                    showMsg("‚ùå OKX Wallet n√£o detectada!", "error");
                    return;
                }

                provider = window.okxwallet || window.ethereum;
                
                const accounts = await provider.request({
                    method: 'eth_requestAccounts'
                });

                userAddr = accounts[0];
                
                const chainId = await provider.request({ method: 'eth_chainId' });
                
                if (chainId !== '0x2105') {
                    try {
                        await provider.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0x2105' }]
                        });
                    } catch {
                        showMsg("‚ö†Ô∏è Muda para Base Network na OKX Wallet", "error");
                        return;
                    }
                }

                showMsg(`‚úÖ Conectado: ${userAddr.slice(0,6)}...${userAddr.slice(-4)}`, "success");
                document.getElementById('deployBtn').disabled = false;

            } catch (error) {
                showMsg(`‚ùå Erro: ${error.message}`, "error");
            }
        }

        async function deployContract() {
            if (!userAddr) {
                showMsg("‚ùå Conecta a carteira primeiro!", "error");
                return;
            }

            const btn = document.getElementById('deployBtn');
            btn.innerHTML = '<span class="loading"></span> A deployar...';
            btn.disabled = true;

            try {
                const tx = await provider.request({
                    method: 'eth_sendTransaction',
                    params: [{
                        from: userAddr,
                        data: BYTECODE,
                        gas: '0x2DC6C0',
                    }]
                });

                showMsg(`üì§ TX: ${tx.slice(0,10)}...`, "success");

                let receipt = null;
                let count = 0;
                while (!receipt && count < 120) {
                    await new Promise(r => setTimeout(r, 2000));
                    receipt = await provider.request({
                        method: 'eth_getTransactionReceipt',
                        params: [tx]
                    });
                    count++;
                }

                if (receipt && receipt.contractAddress) {
                    document.getElementById('contractAddr').textContent = receipt.contractAddress;
                    document.getElementById('contractBox').classList.add('show');
                    showMsg("‚úÖ Contrato deployado!", "success");
                } else {
                    showMsg("‚è±Ô∏è Timeout. Verifica basescan.org", "error");
                }

            } catch (err) {
                if (err.code === 4001) {
                    showMsg("‚ùå Transa√ß√£o cancelada", "error");
                } else {
                    showMsg(`‚ùå Erro: ${err.message}`, "error");
                }
            } finally {
                btn.innerHTML = 'üöÄ Deploy Contract';
                btn.disabled = false;
            }
        }

        function copyAddr() {
            const addr = document.getElementById('contractAddr').textContent;
            navigator.clipboard.writeText(addr);
            alert('‚úÖ Copiado!');
        }

        function showMsg(msg, type) {
            const el = document.getElementById('statusMsg');
            el.textContent = msg;
            el.className = `status show ${type}`;
        }
    </script>
</body>
</html>
