<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploy Flashloan Arbitrage - Arbitrum</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #718096;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .network-badge {
            display: inline-block;
            background: #0ea5e9;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 20px;
        }
        
        .info-box {
            background: #f7fafc;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .info-box h3 {
            color: #2d3748;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .info-box p {
            color: #4a5568;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .status.info {
            background: #ebf8ff;
            color: #2c5282;
            border: 1px solid #bee3f8;
        }
        
        .status.success {
            background: #f0fff4;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        
        .status.error {
            background: #fff5f5;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }
        
        .status.warning {
            background: #fffbeb;
            color: #744210;
            border: 1px solid #fbd38d;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .fee-info {
            background: #fefcbf;
            border: 1px solid #f6e05e;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .fee-info h4 {
            color: #744210;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .fee-row {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 13px;
            color: #5a4a1c;
        }
        
        .fee-row.total {
            font-weight: 700;
            font-size: 15px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #f6e05e;
        }
        
        .address-output {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 10px;
            color: #2d3748;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading {
            display: inline-flex;
            align-items: center;
        }
        
        .tx-link {
            color: #4299e1;
            text-decoration: none;
            font-weight: 600;
        }
        
        .tx-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Deploy Flashloan Arbitrage</h1>
        <p class="subtitle">Contrato inteligente para arbitragem com flashloans</p>
        
        <span class="network-badge">üì° Arbitrum One</span>
        
        <div class="info-box">
            <h3>‚ÑπÔ∏è Sobre o Contrato</h3>
            <p>Este contrato permite executar arbitragens usando flashloans do Aave V3. Ap√≥s o deploy, voc√™ ser√° o √∫nico owner com permiss√£o para executar opera√ß√µes.</p>
        </div>
        
        <div id="status" class="status info">
            üîó Conecte sua carteira para come√ßar
        </div>
        
        <div id="feeInfo" style="display: none;" class="fee-info">
            <h4>üí∞ Estimativa de Gas</h4>
            <div class="fee-row">
                <span>Gas Estimado:</span>
                <span id="gasEstimate">-</span>
            </div>
            <div class="fee-row">
                <span>Pre√ßo do Gas:</span>
                <span id="gasPrice">-</span>
            </div>
            <div class="fee-row total">
                <span>Custo Total:</span>
                <span id="totalCost">-</span>
            </div>
        </div>
        
        <button id="connectBtn" onclick="connectWallet()">
            ü¶ä Conectar MetaMask
        </button>
        
        <button id="deployBtn" onclick="deployContract()" style="display: none; margin-top: 10px;" disabled>
            üìù Fazer Deploy do Contrato
        </button>
        
        <div id="contractAddress" style="display: none;">
            <h3 style="margin: 20px 0 10px 0; color: #2d3748;">‚úÖ Contrato Deployado!</h3>
            <div class="address-output" id="addressOutput"></div>
        </div>
    </div>

    <script>
        // ABI e Bytecode do contrato
        const CONTRACT_ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Profit","type":"event"},{"inputs":[],"name":"AAVE_POOL","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"asset","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"premium","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"bytes","name":"params","type":"bytes"}],"name":"executeOperation","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"getBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"params","type":"bytes"}],"name":"startFlashloan","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}];
        
        const CONTRACT_BYTECODE = "0x6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506116428061005b5f395ff3fe608060405234801561000f575f5ffd5b5060043610610060575f3560e01c806308a01675146100645780631b11d0ff1461008257806351cff8d9146100b25780638298a90d146100ce5780638da5cb5b146100ea578063f8b2cb4f14610108575b5f5ffd5b61006c610138565b6040516100799190610bbe565b60405180910390f35b61009c60048036038101906100979190610ca6565b610150565b6040516100a99190610d56565b60405180910390f35b6100cc60048036038101906100c79190610d6f565b6103e0565b005b6100e860048036038101906100e39190610d9a565b610584565b005b6100f261069c565b6040516100ff9190610bbe565b60405180910390f35b610122600480360381019061011d9190610d6f565b6106c0565b60405161012f9190610e1a565b60405180910390f35b73794a61358d6845594f94dc1db02a252b5b4814ad81565b5f73794a61358d6845594f94dc1db02a252b5b4814ad73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146101d3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101ca90610e8d565b60405180910390fd5b3073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614610241576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161023890610ef5565b60405180910390fd5b5f83838101906102519190611028565b90505f61025e8289610740565b9050868861026c9190611080565b8110156102ae576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102a5906110fd565b60405180910390fd5b5f8789830303905082608001518110156102fd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102f490611165565b60405180910390fd5b7f357d905f1831209797df4d55d79c5c5bf1d9f7311c976afd05e13d881eab9bc88160405161032c9190610e1a565b60405180910390a1508873ffffffffffffffffffffffffffffffffffffffff1663095ea7b373794a61358d6845594f94dc1db02a252b5b4814ad898b6103729190611080565b6040518363ffffffff1660e01b815260040161038f929190611183565b6020604051808303815f875af11580156103ab573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103cf91906111d4565b506001925050509695505050505050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461046e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161046590611249565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016104e49190610bbe565b602060405180830381865afa1580156104ff573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610523919061127b565b6040518363ffffffff1660e01b8152600401610540929190611183565b6020604051808303815f875af115801561055c573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061058091906111d4565b5050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610612576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060990611249565b60405180910390fd5b73794a61358d6845594f94dc1db02a252b5b4814ad73ffffffffffffffffffffffffffffffffffffffff166342b0b77c30868686865f6040518763ffffffff1660e01b81526004016106699695949392919061133f565b5f604051808303815f87803b158015610680575f5ffd5b505af1158015610692573d5f5f3e3d5ffd5b5050505050505050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f8173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016106fa9190610bbe565b602060405180830381865afa158015610715573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610739919061127b565b9050919050565b5f826040015173ffffffffffffffffffffffffffffffffffffffff1663095ea7b3845f0151846040518363ffffffff1660e01b8152600401610783929190611183565b6020604051808303815f875af115801561079f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107c391906111d4565b505f600267ffffffffffffffff8111156107e0576107df610f27565b5b60405190808252806020026020018201604052801561080e5781602001602082028036833780820191505090505b5090508360400151815f8151811061082957610828611399565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083606001518160018151811061087c5761087b611399565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505f845f015173ffffffffffffffffffffffffffffffffffffffff166338ed1739855f8530426040518663ffffffff1660e01b81526004016108fb9594939291906114ad565b5f604051808303815f875af1158015610916573d5f5f3e3d5ffd5b505050506040513d5f823e3d601f19601f8201168201806040525081019061093e91906115c5565b60018151811061095157610950611399565b5b60200260200101519050846060015173ffffffffffffffffffffffffffffffffffffffff1663095ea7b38660200151836040518363ffffffff1660e01b815260040161099e929190611183565b6020604051808303815f875af11580156109ba573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109de91906111d4565b505f600267ffffffffffffffff8111156109fb576109fa610f27565b5b604051908082528060200260200182016040528015610a295781602001602082028036833780820191505090505b5090508560600151815f81518110610a4457610a43611399565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050856040015181600181518110610a9757610a96611399565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050856020015173ffffffffffffffffffffffffffffffffffffffff166338ed1739835f8430426040518663ffffffff1660e01b8152600401610b169594939291906114ad565b5f604051808303815f875af1158015610b31573d5f5f3e3d5ffd5b505050506040513d5f823e3d601f19601f82011682018060405250810190610b5991906115c5565b600181518110610b6c57610b6b611399565b5b6020026020010151935050505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610ba882610b7f565b9050919050565b610bb881610b9e565b82525050565b5f602082019050610bd15f830184610baf565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b610bf181610b9e565b8114610bfb575f5ffd5b50565b5f81359050610c0c81610be8565b92915050565b5f819050919050565b610c2481610c12565b8114610c2e575f5ffd5b50565b5f81359050610c3f81610c1b565b92915050565b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f840112610c6657610c65610c45565b5b8235905067ffffffffffffffff811115610c8357610c82610c49565b5b602083019150836001820283011115610c9f57610c9e610c4d565b5b9250929050565b5f5f5f5f5f5f60a08789031215610cc057610cbf610be0565b5b5f610ccd89828a01610bfe565b9650506020610cde89828a01610c31565b9550506040610cef89828a01610c31565b9450506060610d0089828a01610bfe565b935050608087013567ffffffffffffffff811115610d2157610d20610be4565b5b610d2d89828a01610c51565b92509250509295509295509295565b5f8115159050919050565b610d5081610d3c565b82525050565b5f602082019050610d695f830184610d47565b92915050565b5f60208284031215610d8457610d83610be0565b5b5f610d9184828501610bfe565b91505092915050565b5f5f5f5f60608587031215610db257610db1610be0565b5b5f610dbf87828801610bfe565b9450506020610dd087828801610c31565b935050604085013567ffffffffffffffff811115610df157610df0610be4565b5b610dfd87828801610c51565b925092505092959194509250565b610e1481610c12565b82525050565b5f602082019050610e2d5f830184610e0b565b92915050565b5f82825260208201905092915050565b7f4f6e6c79204161766500000000000000000000000000000000000000000000005f82015250565b5f610e77600983610e33565b9150610e8282610e43565b602082019050919050565b5f6020820190508181035f830152610ea481610e6b565b9050919050565b7f4f6e6c79207468697300000000000000000000000000000000000000000000005f82015250565b5f610edf600983610e33565b9150610eea82610eab565b602082019050919050565b5f6020820190508181035f830152610f0c81610ed3565b9050919050565b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610f5d82610f17565b810181811067ffffffffffffffff82111715610f7c57610f7b610f27565b5b80604052505050565b5f610f8e610bd7565b9050610f9a8282610f54565b919050565b5f60a08284031215610fb457610fb3610f13565b5b610fbe60a0610f85565b90505f610fcd84828501610bfe565b5f830152506020610fe084828501610bfe565b6020830152506040610ff484828501610bfe565b604083015250606061100884828501610bfe565b606083015250608061101c84828501610c31565b60808301525092915050565b5f60a0828403121561103d5761103c610be0565b5b5f61104a84828501610f9f565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61108a82610c12565b915061109583610c12565b92508282019050808211156110ad576110ac611053565b5b92915050565b7f4e6f2070726f66697400000000000000000000000000000000000000000000005f82015250565b5f6110e7600983610e33565b91506110f2826110b3565b602082019050919050565b5f6020820190508181035f830152611114816110db565b9050919050565b7f50726f66697420746f6f206c6f770000000000000000000000000000000000005f82015250565b5f61114f600e83610e33565b915061115a8261111b565b602082019050919050565b5f6020820190508181035f83015261117c81611143565b9050919050565b5f6040820190506111965f830185610baf565b6111a36020830184610e0b565b9392505050565b6111b381610d3c565b81146111bd575f5ffd5b50565b5f815190506111ce816111aa565b92915050565b5f602082840312156111e9576111e8610be0565b5b5f6111f6848285016111c0565b91505092915050565b7f4e6f74206f776e657200000000000000000000000000000000000000000000005f82015250565b5f611233600983610e33565b915061123e826111ff565b602082019050919050565b5f6020820190508181035f83015261126081611227565b9050919050565b5f8151905061127581610c1b565b92915050565b5f602082840312156112905761128f610be0565b5b5f61129d84828501611267565b91505092915050565b5f82825260208201905092915050565b828183375f83830152505050565b5f6112cf83856112a6565b93506112dc8385846112b6565b6112e583610f17565b840190509392505050565b5f819050919050565b5f61ffff82169050919050565b5f819050919050565b5f61132961132461131f846112f0565b611306565b6112f9565b9050919050565b6113398161130f565b82525050565b5f60a0820190506113525f830189610baf565b61135f6020830188610baf565b61136c6040830187610e0b565b818103606083015261137f8185876112c4565b905061138e6080830184611330565b979650505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f6113e06113db6113d6846112f0565b611306565b610c12565b9050919050565b6113f0816113c6565b82525050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b61142881610b9e565b82525050565b5f611439838361141f565b60208301905092915050565b5f602082019050919050565b5f61145b826113f6565b6114658185611400565b935061147083611410565b805f5b838110156114a0578151611487888261142e565b975061149283611445565b925050600181019050611473565b5085935050505092915050565b5f60a0820190506114c05f830188610e0b565b6114cd60208301876113e7565b81810360408301526114df8186611451565b90506114ee6060830185610baf565b6114fb6080830184610e0b565b9695505050505050565b5f67ffffffffffffffff82111561151f5761151e610f27565b5b602082029050602081019050919050565b5f61154261153d84611505565b610f85565b9050808382526020820190506020840283018581111561156557611564610c4d565b5b835b8181101561158e578061157a8882611267565b845260208401935050602081019050611567565b5050509392505050565b5f82601f8301126115ac576115ab610c45565b5b81516115bc848260208601611530565b91505092915050565b5f602082840312156115da576115d9610be0565b5b5f82015167ffffffffffffffff8111156115f7576115f6610be4565b5b61160384828501611598565b9150509291505056fea26469706673582212205c5e64702d6ada709504225eba1df6953693854e1307c178a2b5aceb080f9d0364736f6c634300081f0033";
        
        let web3;
        let userAccount;
        
        async function connectWallet() {
            try {
                const statusDiv = document.getElementById('status');
                
                if (typeof window.ethereum === 'undefined') {
                    statusDiv.className = 'status error';
                    statusDiv.innerHTML = '‚ùå MetaMask n√£o encontrado! Por favor, instale a extens√£o.';
                    return;
                }
                
                statusDiv.className = 'status info';
                statusDiv.innerHTML = '<div class="loading"><div class="spinner"></div>Conectando √† carteira...</div>';
                
                web3 = new Web3(window.ethereum);
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAccount = accounts[0];
                
                // Verificar rede
                const chainId = await web3.eth.getChainId();
                const ARBITRUM_CHAIN_ID = 42161;
                
                if (Number(chainId) !== ARBITRUM_CHAIN_ID) {
                    statusDiv.className = 'status warning';
                    statusDiv.innerHTML = '‚ö†Ô∏è Por favor, mude para a rede Arbitrum One';
                    
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0xa4b1' }], // 42161 em hex
                        });
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            await window.ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [{
                                    chainId: '0xa4b1',
                                    chainName: 'Arbitrum One',
                                    nativeCurrency: {
                                        name: 'Ethereum',
                                        symbol: 'ETH',
                                        decimals: 18
                                    },
                                    rpcUrls: ['https://arb1.arbitrum.io/rpc'],
                                    blockExplorerUrls: ['https://arbiscan.io/']
                                }]
                            });
                        }
                    }
                    return;
                }
                
                statusDiv.className = 'status success';
                statusDiv.innerHTML = `‚úÖ Conectado: ${userAccount.substring(0, 6)}...${userAccount.substring(38)}`;
                
                document.getElementById('connectBtn').style.display = 'none';
                document.getElementById('deployBtn').style.display = 'block';
                
                // Estimar gas
                await estimateGas();
                
            } catch (error) {
                const statusDiv = document.getElementById('status');
                statusDiv.className = 'status error';
                statusDiv.innerHTML = `‚ùå Erro ao conectar: ${error.message}`;
            }
        }
        
        async function estimateGas() {
            try {
                const gasPrice = await web3.eth.getGasPrice();
                
                // Estimar gas para deploy
                const contract = new web3.eth.Contract(CONTRACT_ABI);
                const deployTransaction = contract.deploy({
                    data: CONTRACT_BYTECODE
                });
                
                const gasEstimate = await deployTransaction.estimateGas({ from: userAccount });
                
                const totalCost = BigInt(gasEstimate) * BigInt(gasPrice);
                const totalCostEth = web3.utils.fromWei(totalCost.toString(), 'ether');
                
                document.getElementById('feeInfo').style.display = 'block';
                document.getElementById('gasEstimate').textContent = gasEstimate.toLocaleString() + ' gas';
                document.getElementById('gasPrice').textContent = web3.utils.fromWei(gasPrice, 'gwei') + ' Gwei';
                document.getElementById('totalCost').textContent = parseFloat(totalCostEth).toFixed(6) + ' ETH';
                
                document.getElementById('deployBtn').disabled = false;
                
            } catch (error) {
                console.error('Erro ao estimar gas:', error);
                document.getElementById('deployBtn').disabled = false;
            }
        }
        
        async function deployContract() {
            try {
                const statusDiv = document.getElementById('status');
                const deployBtn = document.getElementById('deployBtn');
                
                deployBtn.disabled = true;
                statusDiv.className = 'status info';
                statusDiv.innerHTML = '<div class="loading"><div class="spinner"></div>Deployando contrato... Assine a transa√ß√£o no MetaMask</div>';
                
                const contract = new web3.eth.Contract(CONTRACT_ABI);
                const deployTransaction = contract.deploy({
                    data: CONTRACT_BYTECODE
                });
                
                const gasEstimate = await deployTransaction.estimateGas({ from: userAccount });
                const gasPrice = await web3.eth.getGasPrice();
                
                deployTransaction.send({
                    from: userAccount,
                    gas: Math.floor(gasEstimate * 1.2), // 20% buffer
                    gasPrice: gasPrice
                })
                .on('transactionHash', (hash) => {
                    statusDiv.className = 'status info';
                    statusDiv.innerHTML = `<div class="loading"><div class="spinner"></div>Transa√ß√£o enviada! <a href="https://arbiscan.io/tx/${hash}" target="_blank" class="tx-link">Ver no Arbiscan</a></div>`;
                })
                .on('receipt', (receipt) => {
                    statusDiv.className = 'status success';
                    statusDiv.innerHTML = `‚úÖ Deploy realizado com sucesso! <a href="https://arbiscan.io/tx/${receipt.transactionHash}" target="_blank" class="tx-link">Ver transa√ß√£o</a>`;
                    
                    document.getElementById('contractAddress').style.display = 'block';
                    document.getElementById('addressOutput').textContent = receipt.contractAddress;
                    
                    deployBtn.style.display = 'none';
                })
                .on('error', (error) => {
                    statusDiv.className = 'status error';
                    if (error.message.includes('User denied')) {
                        statusDiv.innerHTML = '‚ùå Transa√ß√£o cancelada pelo usu√°rio';
                    } else {
                        statusDiv.innerHTML = `‚ùå Erro: ${error.message}`;
                    }
                    deployBtn.disabled = false;
                });
                
            } catch (error) {
                const statusDiv = document.getElementById('status');
                statusDiv.className = 'status error';
                statusDiv.innerHTML = `‚ùå Erro: ${error.message}`;
                document.getElementById('deployBtn').disabled = false;
            }
        }
        
        // Detectar mudan√ßa de conta
        if (window.ethereum) {
            window.ethereum.on('accountsChanged', (accounts) => {
                if (accounts.length === 0) {
                    location.reload();
                } else {
                    userAccount = accounts[0];
                    document.getElementById('status').innerHTML = `‚úÖ Conta alterada: ${userAccount.substring(0, 6)}...${userAccount.substring(38)}`;
                }
            });
            
            window.ethereum.on('chainChanged', () => {
                location.reload();
            });
        }
    </script>
</body>
</html>
